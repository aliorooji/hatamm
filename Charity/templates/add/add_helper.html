{% extends 'base.html' %}
{% load staticfiles %}
{% block _navbar %}
    {% include 'header.html' with active_link='all' %}
{% endblock %}
{% block scripts %}
    <script src="{% static 'datepicker/js/prism.js' %}"></script>
    <script src="{% static 'datepicker/js/vertical-responsive-menu.min.js' %}"></script>
    <script src="{% static 'datepicker/js/jquery-1.10.1.min.js' %}"></script>
    <script src="{% static 'datepicker/js/persianDatepicker.min.js' %}"></script>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCRAEzWa8J41flFbdXsy6jq7MPHOUrOYkA&callback=initMap">
    </script>
    <script src="{% static 'this_project/js/for forms/for forms.js' %}"></script>
    <script>
        var marker, iLat, iLng;
        function initMap() {
            iLat = "{{ form.instance.lat }}";
            iLng = "{{ form.instance.lng }}";
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 11,
                center: {lat: 35.763, lng: 51.388}
            });
            marker = new google.maps.Marker({
                map: map,
                draggable: true,
                animation: google.maps.Animation.DROP,
                position: {lat: 35.763, lng: 51.388},
                icon: "http://maps.google.com/mapfiles/ms/micons/blue.png"
            });
            if (iLat !== 'None') {
                if (iLng !== 'None') {
                    var iLatLng = new google.maps.LatLng(iLat, iLng);
                    map.setCenter(iLatLng);
                    marker.setPosition(iLatLng);
                }
            }
            marker.addListener('click', toggleBounce);
            var geocoder = new google.maps.Geocoder();
            document.getElementById('geo_coder_submit').addEventListener('click', function () {
                geocodeAddress(geocoder, map);
            });
        }
        function toggleBounce() {
            $("#id_lat").val(marker.position.lat());
            $("#id_lng").val(marker.position.lng());
            alert('موقعیت مکانی انتخاب شد.');
            plusDivs(1)
        }
        function geocodeAddress(geocoder, resultsMap) {
            var address = document.getElementById('address').value;
            geocoder.geocode({'address': address}, function (results, status) {
                if (status === 'OK') {
                    resultsMap.setCenter(results[0].geometry.location);
                    var Mlatlng = new google.maps.LatLng(results[0].geometry.location.lat(), results[0].geometry.location.lng());
                    marker.setPosition(Mlatlng);
                    resultsMap.setZoom(14)
                } else {
                    alert('آدرس مورد نظر پیدا نشد.');
                }
            });
        }
        var w = $('#side_map').height();
        $('#map').css('height', w - 30 + 'px');
    </script>
    {#    <script src="http://malsup.github.com/jquery.form.js"></script>#}
    {#    <script>#}
    {#        var tem_key = "{{ tem_key }}";#}
    {#        if (tem_key == 'f_not_valid') {#}
    {#            if ('{{ form.lat.errors }}') {#}
    {#                alert('لطفا موقعیت مکانی خود را مشخص کنید.');#}
    {#            } else {#}
    {#                $('.mySlides').css('display', 'none');#}
    {#                $('#last_slide').css('display', 'block')#}
    {#            }#}
    {#        }#}
    {#    </script>#}
    {#################################for change value#########################}
    <script>
        $('body').on('click', '#gender-w', function () {
            $("#id_gender").val('{{ HelperProfile.W }}');
        });
        $('body').on('click', '#gender-m', function () {
            $("#id_gender").val('{{ HelperProfile.M }}');
        });
        $('body').on('click', '.city-btn', function () {
            var c_id = $(this).children('input').val();
            $("#id_location").val(c_id);
        });
    </script>
    {#################################for change value#########################}
    <script>
        $(function () {
            $("#id_birth_day").persianDatepicker({
                formatDate: "YYYY-0M-0D",
                {#                theme: "",#}
                cellWidth: 35, cellHeight: 30, fontSize: 12
            });
        });
    </script>

{% endblock %}
{% block styles %}
    <link rel="stylesheet" href="{% static 'datepicker/css/persianDatepicker-default.css' %}"/>
    <link href="{% static 'datepicker/css/normalize.css' %}" rel='stylesheet'/>
    {#    <link href="{% static 'datepicker/css/fontawesome/css/font-awesome.min.css' %}" rel='stylesheet'/>#}
    <link href="{% static 'datepicker/css/vertical-responsive-menu.min.css' %}" rel="stylesheet"/>
    {#    <link href="{% static 'datepicker/css/style.css' %}" rel="stylesheet"/>#}
    <link href="{% static 'datepicker/css/prism.css' %}" rel="stylesheet"/>
    <link rel="stylesheet" href="{% static 'datepicker/css/persianDatepicker-default.css' %}"/>
    <link rel="stylesheet" href="{% static 'datepicker/css/persianDatepicker-dark.css' %}"/>
    <link rel="stylesheet" href="{% static 'datepicker/css/persianDatepicker-latoja.css' %}"/>
    <link rel="stylesheet" href="{% static 'datepicker/css/persianDatepicker-melon.css' %}"/>
    <link rel="stylesheet" href="{% static 'datepicker/css/persianDatepicker-lightorang.css' %}"/>
{% endblock styles %}
{% block content %}
    <div class="w3-light-grey">
        <div class="w3-row">
            <br>
            <br>
            <br>
            <form id="form" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div id="side_map" class="w3-col s12 m12 l8">
                    <div class=" w3-padding c-overflow-hidden">
                        <div class="w3-col s12 m6 l6">
                            <div class="w3-padding w3-col s12 m12 l12 w3-text-green">{{ user_form.first_name.label }}:
                                <div class="w3-text-grey">{{ user_form.first_name }}</div>
                                {{ user_form.first_name.errors }}</div>
                            <div class="w3-padding w3-col s12 m12 l12 w3-text-green">{{ user_form.last_name.label }}:
                                <div class="w3-text-grey">{{ user_form.last_name }}</div>
                                {{ user_form.last_name.errors }}</div>
                            <div class="w3-padding w3-tooltip w3-col s12 m12 l12 w3-text-green">{{ user_form.username.label }}:
                                <div class="w3-text-grey">{{ user_form.username }}</div>
                                {{ user_form.username.errors }}
                            <div style="top: -60px" class="w3-text w3-teal w3-padding
                                             input__tTip_main_divs w3-round w3-card-4">این فیلد الزامی است <br> تنها حروف, اعداد و کاراکترهای _ + @ . - قابل قبول است. لطفا بین کاراکتر ها <b class="w3-text-red">فاصله</b> وجود نداشته باشد.
                            </div>
                            </div>
                            <div class="w3-padding w3-col s12 m12 l12 w3-text-green">{{ form.religion.label }}:
                                <div class="w3-text-grey">{{ form.religion }}</div>
                                {{ form.religion.errors }}</div>
                            <div class="w3-padding w3-col s12 m12 l12 w3-text-green">{{ form.gender.label }}:
                                <div class="w3-text-grey">{{ form.gender }}</div>
                                {{ form.gender.errors }}</div>
                            <div class="w3-col s12 m12 w3-padding l12 w3-tooltip w3-text-green"><i
                                    class="fa fa-asterisk w3-text-red"
                                    aria-hidden="true"></i>{{ form.national_code.label }}:
                                <div class="w3-text-grey">{{ form.national_code }}</div>
                                {{ form.national_code.errors }}
                            <div class="w3-text w3-teal w3-padding
                                             input__tTip_main_divs w3-round w3-card-4">این فیلد الزامی است
                            </div>
                            </div>
                        </div>
                        <div class="w3-col s12 m6 l6">
                            <div class="w3-padding w3-col s12 m12 l12 w3-text-green">{{ form.job.label }}:
                                <div class="w3-text-grey">{{ form.job }}</div>
                                {{ form.job.errors }}</div>
                            <div class="w3-padding w3-col w3-tooltip s12 m12 l12 w3-text-green"><i
                                    class="fa fa-asterisk w3-text-red"
                                    aria-hidden="true"></i>{{ form.phone_num.label }}:
                                <div class="w3-text-grey">{{ form.phone_num }}</div>
                                {{ form.phone_num.errors }}
                            <div class="w3-text w3-teal w3-padding
                                             input__tTip_main_divs w3-round w3-card-4">این فیلد الزامی است
                            </div>
                            </div>
                            <div class="w3-col s12 m12 w3-padding l12 w3-text-green">{{ form.address.label }}:
                                <div class="w3-text-grey">{{ form.address }}</div>
                                {{ form.address.errors }}</div>
                            <div class="w3-col w3-padding s12 m12 l12 w3-text-green">{{ form.birth_day.label }}:
                                <div class="w3-text-grey">{{ form.birth_day }}</div>
                                {{ form.birth_day.errors }}</div>
                            <div class="w3-col w3-padding s12 m12 l12 w3-text-green">{{ user_form.email.label }}:
                                <div class="w3-text-grey">{{ user_form.email }}</div>
                                {{ user_form.email.errors }}</div>
                            <div class="w3-row w3-col w3-padding s12 m12 l12 w3-text-green">
                                <div class="w3-col s6 m6 l6">{{ form.is_married.label }}
                                    {{ form.is_married }}{{ form.is_married.errors }}</div>
                                <div class="w3-col s6 m6 l6">{{ form.others_view_u.label }}
                                    {{ form.others_view_u }}{{ form.others_view_u.errors }}</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="w3-col s12 m12 l4">
                    <div class="w3-text-blue-grey w3-padding w3-tooltip w3-col l12">
                        <i
                                    class="fa fa-asterisk w3-text-red"
                                    aria-hidden="true"></i>
                        <div id="map" class="w3-round"></div>
                        {{ form.lat.errors }}
                        <div style="top: -40px" class="w3-text w3-teal w3-padding
                                             input__tTip_main_divs w3-round w3-card-4">این فیلد الزامی است. <br> لطفا را
                            در محل مورد نظرتان قرار دهید و روی آن کلیک کنید.
                        </div>
                    </div>
                    <div class="c-height-0-px c-overflow-hidden">{{ form.lat }}{{ form.lng }}</div>
                </div>
                {#                <div class="w3-row">#}
                {#                <div class="w3-padding s12 m12 l12 w3-row">#}
                {#                    <div class="w3-col m1 l2 c-height-1-px">d</div>#}
                {#                    <div class="w3-col m10 l8 c-height-1-px">a</div>#}
                {#                    <div class="w3-col m1 l2 c-height-1-px">f</div>#}
                {#                    #}
                {#                </div>#}
                <div class="w3-col s12 m12 l12">
                    <div class="w3-col m1 l2 c-height-1-px"></div>
                    <div class="w3-col s12 m10 l8">
                        <h4 class="w3-center w3-text-green">{{ form.about_you.label }}:</h4>
                        <div class="w3-center w3-padding w3-text-blue-grey">
                            <div class="w3-text-grey">{{ form.about_you }}</div>
                            {{ form.about_you.errors }}</div>
                    </div>
                    <div class="w3-col m1 l2 c-height-1-px"></div>
                </div>
                {#                </div>#}
                <div class="w3-center w3-text-green w3-col s12 m12 l12 w3-padding">
                    <div class="w3-row">
                        <div class="w3-col m2 l3 c-height-1-px"></div>
                        <div class="w3-col s12 m8 l6">{{ form.profile_image.label }}: {{ form.profile_image.help_text }}
                            {{ form.profile_image }}{{ form.profile_image.errors }}
                        </div>
                        <div class="w3-col m2 l3 c-height-1-px"></div>
                    </div>
                </div>
                <div class="w3-row">
                    <div class="w3-col s3 m5 l5 c-height-1-px"></div>
                    <div class="w3-col s6 m2 l2">
                        <button type="submit"
                                class="w3-padding c-width-100 w3-btn w3-teal w3-round w3-display-right">
                            ثبت اطلاعات
                        </button>
                    </div>
                    <div class="w3-col m5 l5 c-height-1-px"></div>
                </div>
                <br>
                <br>
            </form>
        </div>
        <!------------------------------------------------------>
        {#    <div class="w3-row">#}
        {#        <div class="w3-col m1 l2 c-height-1-px"></div>#}
        {#        <div class="w3-col s12 m10 l8">#}
        {#            <div class="w3-padding w3-border w3-border-amber c-overflow-hidden w3-row">#}
        {#                <div class="w3-col s12 m12 l12">#}
        {#                    <div class="w3-col s12 l12 m12">#}
        {#                        <h3 class="w3-center w3-text-amber">موقعیت مکانی:</h3>#}
        {#                        <h4 class="w3-center w3-text-amber">لطفا <img#}
        {#                                src="http://maps.google.com/mapfiles/ms/micons/blue.png"> را در محل مورد نظر خود قرار#}
        {#                            دهید و روی آن کلیک کنید. </h4>#}
        {#                    </div>#}
        {#                    <div id="w3-row">#}
        {#                        <div class="w3-col s1 m3 l3 c-height-1-px"></div>#}
        {#                        <div class="w3-col s10 m6 l6 w3-padding">#}
        {#                            <input id="address" type="text" placeholder="جستجو در نقشه" value=""#}
        {#                                   class="w3-text-grey">#}
        {##}
        {#                            <div class="w3-center w3-margin-top">#}
        {#                                <button id="geo_coder_submit" type="button"#}
        {#                                        class="w3-btn w3-deep-orange w3-round-jumbo">جستجو#}
        {#                                </button>#}
        {#                            </div>#}
        {#                        </div>#}
        {#                        <div class="w3-col s1 m3 l3 c-height-1-px"></div>#}
        {#                    </div>#}
        {#                    <div class="w3-text-blue-grey w3-padding w3-col l12">#}
        {#                        <div id="map" style="height: 400px" class=""></div>#}
        {#                        {{ form.lat.errors }}#}
        {#                    </div>#}
        {#                </div>#}
        {#            </div>#}
        {#            <br>#}
        {##}
        {#        </div>#}
        {#        <div class="w3-col m1 l2 c-height-1-px"></div>#}
        {#    </div>#}

        {#        <div class="w3-padding c-overflow-hidden w3-row">#}
        {#            <div class="w3-col s12 m6 l6">#}
        {##}
        {##}
        {#            </div>#}
        {#            <div class="w3-col s12 m6 l6">#}
        {##}
        {#                <div class="c-overflow-hidden" style="height: 0px"></div>#}
        {#            </div>#}
        {#        </div>#}
        {#        <div class="w3-row">#}
        {#            <div class="w3-col m2 l3 c-height-1-px"></div>#}
        {#            <div class="w3-col s12 m8 l6">#}
        {#                <div class="w3-center w3-padding w3-text-blue-grey w3-round w3-light-grey c-overflow-hidden">#}
        {#                    <div class=" w3-col s9 m9 w3-padding l9 w3-round">#}
        {#                        {{ form.profile_image }}{{ form.profile_image.errors }}</div>#}
        {#                    <div class="w3-col s3 m3 l3"><span#}
        {#                            class="w3-padding w3-text-blue-grey">{{ form.profile_image.label }}:</span>#}
        {#                    </div>#}
        {#                </div>#}
        {#            </div>#}
        {#            <div class="w3-col m2 l3 c-height-1-px"></div>#}
        {#        </div>#}

    </div>
    <!------------------------------------------------------>

{% endblock %}